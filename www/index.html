<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Migration and Deportation Flows</title>
    <link rel="stylesheet" href="style.css">
    <!-- MapLibre GL JS -->
    <script src="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.js"></script>
    <link href="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.css" rel="stylesheet" />
    <!-- Scrollama -->
    <script src="https://unpkg.com/scrollama"></script>
    <!-- Turf.js -->
    <script src="https://unpkg.com/@turf/turf/turf.min.js"></script>
    <!-- D3.js -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <!-- D3 Sankey -->
    <script src="https://unpkg.com/d3-sankey@0.12.3/dist/d3-sankey.min.js"></script>
</head>

<body>

    <!-- Small header with black background -->
    <header>
        <div class="header-content">
            <h1>From Roots to Removals</h1>
            <div class="header-author">
                <a href="https://anfelipecb.github.io/" class="author-link" target="_blank" rel="noopener noreferrer">
                    Andrés Felipe Camacho
                </a>
                <a href="https://github.com/anfelipecb" class="github-link" target="_blank" rel="noopener noreferrer" aria-label="GitHub Profile">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                    </svg>
                </a>
            </div>
        </div>
    </header>

    <!-- Full-screen hero section with background image -->
    <section id="hero-section">
        <div class="hero-content">
            <h1 class="hero-title">From Roots to Removals</h1>
            <p class="hero-subtitle">Understanding Migrations and Deportations in the United States</p>
        </div>
    </section>

    <section id="migration-section">
        <div class="migration-container">
            <div id="migration-viz"></div>
            <article>
                <div class="step" data-year="1850">
                    <h3 class="era-1850">The Beginning (1850)</h3>
                    <p>In 1850, the United States was home to 2.2 million foreign-born residents (<span class="era-1850">9.7% of the population</span>), representing the early waves of immigration that would shape the nation's character and economy.</p>
                </div>
                <div class="step" data-year="1960">
                    <h3 class="era-1960">Post-War Growth (1960)</h3>
                    <p>By 1960, the immigrant population had grown to 9.7 million (<span class="era-1960">5.4% of the population</span>), reflecting post-World War II migration patterns and the beginning of increased global mobility.</p>
                </div>
                <div class="step" data-year="2010">
                    <h3 class="era-2010">Modern Migration (2010)</h3>
                    <p>The 21st century saw explosive growth—39.9 million foreign-born residents (<span class="era-2010">12.9% of the population</span>) called the U.S. home, making America one of the world's most diverse nations.</p>
                </div>
                <div class="step" data-year="2024">
                    <h3 class="era-2024">Today (2024)</h3>
                    <p>Today, 50.2 million immigrants (<span class="era-2024">14.8% of the population</span>) live in the United States. Each icon you see represents about 200,000 individuals contributing to American society, economy, and culture.</p>
                </div>
            </article>
        </div>
        <div class="migration-context">
            <h3>Generations of Migrants</h3>
            <p>According to the Migration Policy Institute (MPI), immigrants and their U.S.-born children (first and second generation together) now number about <span class="highlight-number">90.8 million people</span>, or <span class="highlight-percent">27 percent</span> of the U.S. civilian population in 2023. MPI further estimates that in 2022 roughly <span class="highlight-number">17.6 million children</span>, <span class="highlight-percent">26 percent</span> of all U.S. children, lived with at least one immigrant parent, and that nearly nine in ten of these children (<span class="highlight-percent">87 percent</span>) are U.S.-born second-generation immigrants.
            </p>
            <p>Historically, the largest inflows feeding these diasporas were overwhelmingly <span class="highlight-historical">European</span> – especially <span class="highlight-historical">German, Irish and Italian</span> – whereas today the single most prominent origin is <span class="highlight-contrast">Mexican</span>, which makes a sharp contrast with how heavily recent enforcement and deportation policies have targeted <span class="highlight-contrast">Latin American migrants</span>.</p>
        </div>
    </section>

    <section id="sankey-section">
        <div class="sankey-container">
            <h2>The Deportation Pipeline</h2>
            <p class="sankey-description">This diagram shows the flow of individuals through ICE's enforcement pipeline from 2023-2025. An <strong>arrest</strong> occurs when ICE apprehends someone. After arrest, individuals may be transferred to ICE <strong>detention</strong> facilities or released (shown as "No Detention"). Some individuals appear in detention without a corresponding ICE arrest in our data—these may represent transfers from Customs and Border Protection or other agencies (shown as "No ICE Arrest"). From detention, individuals either proceed to <strong>removal</strong> (deportation from the United States) or are released. This visualization tracks unique individuals through each stage of the enforcement process.</p>
            <div id="sankey-container"></div>
        </div>
    </section>

    <section id="timeline-section">
        <div class="timeline-container">
            <div class="timeline-header">
                <h2>Timeline of Deportations</h2>
                <p class="timeline-description">Monthly counts of arrests, detentions, and removals over time.</p>
            </div>
            <div id="timeline-scrolly">
                <div id="timeline-viz"></div>
                <div id="timeline-filter">
                    <p>Select the country of citizenship you want to show.</p>
                    <select id="country-select">
                        <option value="all">All Countries</option>
                    </select>
                </div>
                <article>
                    <div class="step" data-step="1">
                        <h3>Understanding the Patterns</h3>
                        <p>The timeline reveals important trends in deportations. Notice how the three lines—arrests, detentions, and removals—fluctuate over time, showing the ebb and flow of enforcement activities.</p>
                    </div>
                    <div class="step" data-step="2">
                        <h3>A New Administration</h3>
                        <p>In January 2025, a new administration took office, marking a significant shift in immigration policy. The vertical line indicates this transition point, which may have influenced deportation patterns.</p>
                    </div>
                </article>
                <div class="timeline-spacer"></div>
            </div>
        </div>
    </section>

    <main>
        <section id="scrolly">
            <div id="map"></div>
            <article>
                <div class="step intro-step">
                    <h2>The Journey of Removal</h2>
                    <p>Between September 2023 and July 2025, <strong>527,346 individuals</strong> were removed from the United States. This visualization traces their journey from the state of arrest to their country of destination.</p>
                </div>
                <div class="step destination-step" data-destination-index="0">
                    <h2 class="dest-title">Destination 1</h2>
                    <p class="dest-summary">Loading...</p>
                    <ul class="dest-origins"></ul>
                </div>
                <div class="step destination-step" data-destination-index="1">
                    <h2 class="dest-title">Destination 2</h2>
                    <p class="dest-summary">Loading...</p>
                    <ul class="dest-origins"></ul>
                </div>
                <div class="step destination-step" data-destination-index="2">
                    <h2 class="dest-title">Destination 3</h2>
                    <p class="dest-summary">Loading...</p>
                    <ul class="dest-origins"></ul>
                </div>
                <div class="step interactive-step">
                    <h2>Explore Destinations Yourself</h2>
                    <p>The map now shows the entire world. <strong>Hover</strong> over any country to see removal statistics and filter migration flows. <strong>Click</strong> on a country to zoom in and explore in detail. All map controls are now unlocked for your exploration.</p>
                </div>
            </article>
        </section>
    </main>

    <!-- Detention Journey Section -->
    <section id="detention-section">
        <div class="detention-intro">
            <h2>Paths Through Detention</h2>
            <p class="detention-description">
                Before being removed from the United States, detained individuals are often transferred between 
                multiple detention facilities across the country. Some people experience dozens of transfers, 
                spending months or years moving through the detention system. This visualization reveals the 
                network of transfers and follows two individual stories through America's detention infrastructure.
            </p>
        </div>
        <div id="detention-scrolly">
            <div id="detention-map"></div>
            <article>
                <div class="step intro-step">
                    <h2>A Network of Transfers</h2>
                    <p>
                        Among the nearly 700,000 detention records in our data, over 176,000 individuals 
                        were detained in more than one facility. Across all transfers, people traveled 
                        an average of <strong id="avg-distance">493 miles (793 km)</strong> between facilities.
                    </p>
                    <p class="particle-note">
                        <strong>Each flowing particle represents approximately 50 transfer events</strong> between 
                        two facilities. The busiest routes show the most particles moving between them.
                    </p>
                </div>
                <div class="step chicago-step">
                    <h2>Chicago</h2>
                    <div class="location-stats" id="chicago-stats">
                        <p><strong>Facilities in Chicago area:</strong> <span id="chicago-facility-count">Loading...</span></p>
                        <p><strong>Total transfers from Chicago:</strong> <span id="chicago-transfers">Loading...</span></p>
                        <p class="stat-detail"><strong>Top destination:</strong></p>
                        <ul id="chicago-destinations" class="destination-list">
                            <li>Loading...</li>
                        </ul>
                    </div>
                </div>
                <div class="step facility1-step">
                    <h2 id="facility1-name">Busiest Transfer Facility</h2>
                    <div class="location-stats" id="facility1-stats">
                        <p><strong>Location:</strong> <span id="facility1-location">Loading...</span></p>
                        <p><strong>Total transfers:</strong> <span id="facility1-transfers">Loading...</span></p>
                        <p class="stat-detail"><strong>Top destinations from here:</strong></p>
                        <ul id="facility1-destinations" class="destination-list">
                            <li>Loading...</li>
                        </ul>
                    </div>
                </div>
                <div class="step facility2-step">
                    <h2 id="facility2-name">Second Busiest Facility</h2>
                    <div class="location-stats" id="facility2-stats">
                        <p><strong>Location:</strong> <span id="facility2-location">Loading...</span></p>
                        <p><strong>Total transfers:</strong> <span id="facility2-transfers">Loading...</span></p>
                        <p class="stat-detail"><strong>Top destinations from here:</strong></p>
                        <ul id="facility2-destinations" class="destination-list">
                            <li>Loading...</li>
                        </ul>
                    </div>
                </div>
                <div class="step story1-step">
                    <h2>Detention Story 1: 14 Facilities</h2>
                    <div class="person-demographics">
                        <p>Loading...</p>
                    </div>
                    <div class="person-journey">
                        <p>Loading...</p>
                    </div>
                    <p class="detention-counter detention-counter-1">Starting journey...</p>
                    <p class="highlight-note">Follow the <span style="color: #b90c0c;">red point</span> as it moves through each detention facility.</p>
                </div>
                <div class="step reflection-step">
                    <h2>The Human Cost of Transfers</h2>
                    <p>
                        Thousands of people experience multiple transfers during 
                        their detention, each move disrupting legal proceedings, family connections, and medical care.
                    </p>
                    <p>
                        The human cost of these transfers, including disrupted attorney-client relationships, 
                        separation from family, and psychological toll, cannot be captured in miles or statistics alone.
                    </p>
                </div>
                <div class="step interactive-step">
                    <h2>Explore the facilities data yourself</h2>
                    <p>
                        The blue markers show detention facilities across the United States. Each facility's size 
                        represents the volume of transfers it handles.
                    </p>
                    <p class="interaction-instructions">
                        <strong>Hover</strong> over any facility to see its transfer statistics.<br>
                        <strong>Zoom and pan</strong> to explore different regions.<br>
                        <strong>Watch</strong> the continuous flow of transfers in the background.
                    </p>
                    <p style="margin-top: 1.5rem;">
                        <button class="data-sources-btn" onclick="showDataSourcesOverlay()">View Data Sources & Methodology</button>
                    </p>
                </div>
            </article>
        </div>
    </section>

    <!-- Data Sources and Methodology Overlay -->
    <section id="data-sources-overlay">
        <div class="overlay-backdrop"></div>
        <div class="data-sources-card">
            <h2> Repository and Code</h2>
            <p>The repository and code for this project is available on <a href="https://github.com/anfelipecb/migr_deport_interactive" target="_blank" rel="noopener noreferrer">GitHub</a>.</p>

            <h2>Data Sources & Methodology</h2>
            
            <div class="data-source-section">
                <h3>Data Sources</h3>
                <ul>
                    <li><strong>Arrests, Detentions, and Removals:</strong> Data provided by the <a href="https://deportationdata.org/data/ice.html" target="_blank" rel="noopener noreferrer">Deportation Data Project</a>, which obtains ICE enforcement data through FOIA requests. This visualization uses data covering September 2023 to July 2025, including arrests, detention records, and removal flows.</li>
                    <li><strong>Historical Immigration Population:</strong> Data from the <a href="https://www.migrationpolicy.org/programs/data-hub/charts/immigrant-population-over-time" target="_blank" rel="noopener noreferrer">Migration Policy Institute Data Hub</a>, showing the foreign-born population in the United States from 1850 to 2024.</li>
                    <li><strong>Immigration Statistics and Generations Data:</strong> Statistics on immigrants, their U.S.-born children, and generational demographics from the <a href="https://www.migrationpolicy.org/article/frequently-requested-statistics-immigrants-and-immigration-united-states-2024" target="_blank" rel="noopener noreferrer">Migration Policy Institute article "Frequently Requested Statistics on Immigrants and Immigration in the United States (2024)"</a>.</li>
                    <li><strong>Detention Facilities:</strong> Geographic coordinates and facility information from ICE facility database, matched to detention records by facility code provided by the Vera Institute of Justice.</li>
                </ul>
            </div>

            <div class="methodology-section">
                <h3>Visualization Methodology</h3>
                <ul>
                    <li><strong>Particle Representation:</strong> Each particle in the removal flows represents approximately <strong>50 individuals</strong> transferred between locations</li>
                    <li><strong>Detention Transfers:</strong> Each background particle represents approximately <strong>50 transfer events</strong> between detention facilities</li>
                    <li><strong>Data Aggregation:</strong> Flows are aggregated by facility pairs and origin-destination pairs to improve performance and clarity</li>
                    <li><strong>Distance Calculations:</strong> All distances calculated using the Haversine formula for great circle distances</li>
                    <li><strong>Filtering:</strong> Only individuals with 2+ detention records are included in the detention journey analysis (176,947 individuals)</li>
                    <li><strong>Note:</strong> The Migration Policy Institute data represents estimates of the foreign-born population based on U.S. Census and American Community Survey data</li>
                </ul>
            </div>


            <button class="close-overlay-btn" onclick="window.closeDataSourcesOverlay()">Close</button>
        </div>
    </section>

    <script src="timeline.js"></script>
    <script src="sankey.js"></script>
    <script src="migration.js"></script>
    <script src="https://unpkg.com/topojson-client@3"></script>
    <script src="main.js"></script>
    <script src="detention_journey.js"></script>
</body>

</html>